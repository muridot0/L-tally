var kt=Object.create,fe=Object.defineProperty;var Mt=Object.getOwnPropertyDescriptor;var xt=Object.getOwnPropertyNames;var At=Object.getPrototypeOf,St=Object.prototype.hasOwnProperty;var Ye=t=>fe(t,"__esModule",{value:!0});var Ot=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ct=(t,e)=>{for(var i in e)fe(t,i,{get:e[i],enumerable:!0})},Rt=(t,e,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of xt(e))!St.call(t,o)&&o!=="default"&&fe(t,o,{get:()=>e[o],enumerable:!(i=Mt(e,o))||i.enumerable});return t},he=t=>Rt(Ye(fe(t!=null?kt(At(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Xe=Ot((ve,ze)=>{(function(t,e){typeof ve=="object"&&typeof ze!="undefined"?e(ve):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.fastUniqueNumbers={}))})(ve,function(t){"use strict";var e=function(d){return function(h){var s=d(h);return h.add(s),s}},i=function(d){return function(h,s){return d.set(h,s),s}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,l=536870912,m=l*2,b=function(d,h){return function(s){var U=h.get(s),g=U===void 0?s.size:U<m?U+1:0;if(!s.has(g))return d(s,g);if(s.size<l){for(;s.has(g);)g=Math.floor(Math.random()*m);return d(s,g)}if(s.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;s.has(g);)g=Math.floor(Math.random()*o);return d(s,g)}},S=new WeakMap,F=i(S),p=b(F,S),u=e(p);t.addUniqueNumber=u,t.generateUniqueNumber=p,Object.defineProperty(t,"__esModule",{value:!0})})});Ye(exports);Ct(exports,{DEFAULT_EVENTS:()=>Ee,IdleTimerComponent:()=>Ae,IdleTimerConsumer:()=>ft,IdleTimerContext:()=>se,IdleTimerProvider:()=>pt,createMocks:()=>st,useIdleTimer:()=>z,useIdleTimerContext:()=>ht,withIdleTimer:()=>$e,workerTimers:()=>X});var J=he(require("react"));function $e(t){return(0,J.forwardRef)(function(i,o){let l={...i},m=z(l);return typeof o=="function"?o(m):o&&(o.current=m),J.default.createElement(t,{...i,...m})})}var Je=class extends J.Component{},Ae=class extends Je{constructor(e){super(e);this.onPresenceChange&&e.setOnPresenceChange(this.onPresenceChange.bind(this)),this.onPrompt&&e.setOnPrompt(this.onPrompt.bind(this)),this.onIdle&&e.setOnIdle(this.onIdle.bind(this)),this.onActive&&e.setOnActive(this.onActive.bind(this)),this.onAction&&e.setOnAction(this.onAction.bind(this)),this.onMessage&&e.setOnMessage(this.onMessage.bind(this))}};var n=he(require("react"));var ie=he(Xe());var Ke=t=>t.method!==void 0&&t.method==="call";var Qe=t=>t.error===null&&typeof t.id=="number";var Ze=t=>{let e=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),o=new Map,l=new Worker(t);return l.addEventListener("message",({data:p})=>{if(Ke(p)){let{params:{timerId:u,timerType:f}}=p;if(f==="interval"){let d=e.get(u);if(typeof d=="number"){let h=o.get(d);if(h===void 0||h.timerId!==u||h.timerType!==f)throw new Error("The timer is in an undefined state.")}else if(typeof d!="undefined")d();else throw new Error("The timer is in an undefined state.")}else if(f==="timeout"){let d=i.get(u);if(typeof d=="number"){let h=o.get(d);if(h===void 0||h.timerId!==u||h.timerType!==f)throw new Error("The timer is in an undefined state.")}else if(typeof d!="undefined")d(),i.delete(u);else throw new Error("The timer is in an undefined state.")}}else if(Qe(p)){let{id:u}=p,f=o.get(u);if(f===void 0)throw new Error("The timer is in an undefined state.");let{timerId:d,timerType:h}=f;o.delete(u),h==="interval"?e.delete(d):i.delete(d)}else{let{error:{message:u}}=p;throw new Error(u)}}),{clearInterval:p=>{let u=(0,ie.generateUniqueNumber)(o);o.set(u,{timerId:p,timerType:"interval"}),e.set(p,u),l.postMessage({id:u,method:"clear",params:{timerId:p,timerType:"interval"}})},clearTimeout:p=>{let u=(0,ie.generateUniqueNumber)(o);o.set(u,{timerId:p,timerType:"timeout"}),i.set(p,u),l.postMessage({id:u,method:"clear",params:{timerId:p,timerType:"timeout"}})},setInterval:(p,u)=>{let f=(0,ie.generateUniqueNumber)(e);return e.set(f,()=>{p(),typeof e.get(f)=="function"&&l.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:f,timerType:"interval"}})}),l.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:f,timerType:"interval"}}),f},setTimeout:(p,u)=>{let f=(0,ie.generateUniqueNumber)(i);return i.set(f,p),l.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:f,timerType:"timeout"}}),f}}};var oe=null,et=(t,e)=>()=>{if(oe!==null)return oe;let i=new Blob([e],{type:"application/javascript; charset=utf-8"}),o=URL.createObjectURL(i);return oe=t(o),oe.setTimeout(()=>URL.revokeObjectURL(o),0),oe};var tt=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`;var Te=et(Ze,tt),rt=t=>Te().clearInterval(t),nt=t=>Te().clearTimeout(t),it=(t,e)=>Te().setInterval(t,e),ot=(t,e)=>Te().setTimeout(t,e);var k=(typeof window=="undefined"?"undefined":typeof window)=="object";var I={setTimeout:k?setTimeout.bind(window):setTimeout,clearTimeout:k?clearTimeout.bind(window):clearTimeout,setInterval:k?setInterval.bind(window):setInterval,clearInterval:k?clearInterval.bind(window):clearInterval},X={setTimeout:ot,clearTimeout:nt,setInterval:it,clearInterval:rt};function st(){I.setTimeout=setTimeout,I.clearTimeout=clearTimeout,I.setInterval=setInterval,I.clearInterval=clearInterval,X.setTimeout=setTimeout,X.clearTimeout=clearTimeout,X.setInterval=setInterval,X.clearInterval=clearInterval}function at(t){I.setTimeout=t.setTimeout,I.clearTimeout=t.clearTimeout,I.setInterval=t.setInterval,I.clearInterval=t.clearInterval}var K={},ct=class{constructor(e){this.closed=!1;this.mc=new MessageChannel;this.name=e,K[e]=K[e]||[],K[e].push(this),this.mc.port1.start(),this.mc.port2.start(),this.onStorage=this.onStorage.bind(this),window.addEventListener("storage",this.onStorage)}onStorage(e){if(e.storageArea!==window.localStorage||e.key.substring(0,this.name.length)!==this.name||e.newValue===null)return;let i=JSON.parse(e.newValue);this.mc.port2.postMessage(i)}postMessage(e){if(this.closed)throw new Error("InvalidStateError");let i=JSON.stringify(e),o=`${this.name}:${String(Date.now())}${String(Math.random())}`;window.localStorage.setItem(o,i),I.setTimeout(()=>{window.localStorage.removeItem(o)},500),K[this.name].forEach(l=>{l!==this&&l.mc.port2.postMessage(JSON.parse(i))})}close(){if(this.closed)return;this.closed=!0,this.mc.port1.close(),this.mc.port2.close(),window.removeEventListener("storage",this.onStorage);let e=K[this.name].indexOf(this);K[this.name].splice(e,1)}get onmessage(){return this.mc.port1.onmessage}set onmessage(e){this.mc.port1.onmessage=e}get onmessageerror(){return this.mc.port1.onmessageerror}set onmessageerror(e){this.mc.port1.onmessageerror=e}addEventListener(e,i){return this.mc.port1.addEventListener(e,i)}removeEventListener(e,i){return this.mc.port1.removeEventListener(e,i)}dispatchEvent(e){return this.mc.port1.dispatchEvent(e)}},lt=typeof window=="undefined"?void 0:typeof window.BroadcastChannel=="function"?window.BroadcastChannel:ct;function ut(t=0){return new Promise(e=>I.setTimeout(e,t))}function Ie(){return Math.random().toString(36).substring(2)}var c;(function(s){s[s.APPLY=0]="APPLY",s[s.TELL=1]="TELL",s[s.CLOSE=2]="CLOSE",s[s.REGISTER=3]="REGISTER",s[s.DEREGISTER=4]="DEREGISTER",s[s.IDLE=5]="IDLE",s[s.ACTIVE=6]="ACTIVE",s[s.PROMPT=7]="PROMPT",s[s.START=8]="START",s[s.RESET=9]="RESET",s[s.ACTIVATE=10]="ACTIVATE",s[s.PAUSE=11]="PAUSE",s[s.RESUME=12]="RESUME",s[s.MESSAGE=13]="MESSAGE"})(c||(c={}));var Se=class{constructor(e,i){this.token=Ie();this.isLeader=!1;this.isDead=!1;this.isApplying=!1;this.reApply=!1;this.intervals=[];this.listeners=[];this.channel=e,this.options=i,this.apply=this.apply.bind(this),this.awaitLeadership=this.awaitLeadership.bind(this),this.sendAction=this.sendAction.bind(this)}async apply(){if(this.isLeader||this.isDead)return!1;if(this.isApplying)return this.reApply=!0,!1;this.isApplying=!0;let e=!1,i=o=>{let{token:l,action:m}=o.data;l!==this.token&&(m===c.APPLY&&l>this.token&&(e=!0),m===c.TELL&&(e=!0))};this.channel.addEventListener("message",i);try{return this.sendAction(c.APPLY),await ut(this.options.responseTime),this.channel.removeEventListener("message",i),this.isApplying=!1,e?this.reApply?this.apply():!1:(this.assumeLead(),!0)}catch{return!1}}awaitLeadership(){if(this.isLeader)return Promise.resolve();let e=!1,i=null;return new Promise(o=>{let l=()=>{if(e)return;e=!0,I.clearInterval(i);let b=this.intervals.indexOf(i);this.intervals.splice(b,1),this.channel.removeEventListener("message",m),o()};i=I.setInterval(()=>{this.apply().then(()=>{this.isLeader&&l()})},this.options.fallbackInterval),this.intervals.push(i);let m=b=>{let{action:S}=b.data;S===c.CLOSE&&this.apply().then(()=>{this.isLeader&&l()})};this.channel.addEventListener("message",m)})}sendAction(e){this.channel.postMessage({action:e,token:this.token})}assumeLead(){this.isLeader=!0;let e=i=>{let{action:o}=i.data;o===c.APPLY&&this.sendAction(c.TELL)};return this.channel.addEventListener("message",e),this.listeners.push(e),this.sendAction(c.TELL)}waitForLeadership(){return this.deferred?this.deferred:(this.deferred=this.awaitLeadership(),this.deferred)}close(){this.isDead||(this.isDead=!0,this.isLeader=!1,this.sendAction(c.CLOSE),this.listeners.forEach(e=>this.channel.removeEventListener("message",e)),this.intervals.forEach(e=>I.clearInterval(e)))}};var L;(function(o){o[o.PROMPTED=0]="PROMPTED",o[o.ACTIVE=1]="ACTIVE",o[o.IDLE=2]="IDLE"})(L||(L={}));var Oe=class{constructor(e){this.token=Ie();this.registry=new Map;this.allIdle=!1;this.isLastActive=!1;let{channelName:i}=e;if(this.options=e,this.channel=new lt(i),this.registry.set(this.token,1),e.leaderElection){let o={fallbackInterval:2e3,responseTime:100};this.elector=new Se(this.channel,o),this.elector.waitForLeadership()}this.channel.addEventListener("message",o=>{let{action:l,token:m,data:b}=o.data;switch(l){case c.REGISTER:this.registry.set(m,2);break;case c.DEREGISTER:this.registry.delete(m);break;case c.IDLE:this.idle(m);break;case c.ACTIVE:this.active(m);break;case c.PROMPT:this.prompt(m);break;case c.START:this.start(m);break;case c.RESET:this.reset(m);break;case c.ACTIVATE:this.activate(m);break;case c.PAUSE:this.pause(m);break;case c.RESUME:this.resume(m);break;case c.MESSAGE:this.options.onMessage(b);break}}),this.send(c.REGISTER)}get isLeader(){if(!this.elector)throw new Error('\u274C Leader election is not enabled. To Enable it set the "leaderElection" property to true.');return this.elector.isLeader}prompt(e=this.token){this.registry.set(e,0);let i=[...this.registry.values()].every(o=>o===0);e===this.token&&this.send(c.PROMPT),i&&this.options.onPrompt()}idle(e=this.token){this.registry.set(e,2);let i=[...this.registry.values()].every(o=>o===2);e===this.token&&this.send(c.IDLE),!this.allIdle&&i&&(this.allIdle=!0,this.options.onIdle())}active(e=this.token){this.allIdle=!1,this.registry.set(e,1);let i=[...this.registry.values()].some(o=>o===1);e===this.token&&this.send(c.ACTIVE),i&&this.options.onActive(),this.isLastActive=e===this.token}start(e=this.token){this.allIdle=!1,this.registry.set(e,1),e===this.token?this.send(c.START):this.options.start(!0),this.isLastActive=e===this.token}reset(e=this.token){this.allIdle=!1,this.registry.set(e,1),e===this.token?this.send(c.RESET):this.options.reset(!0),this.isLastActive=e===this.token}activate(e=this.token){this.allIdle=!1,this.registry.set(e,1),e===this.token?this.send(c.ACTIVATE):this.options.activate(!0),this.isLastActive=e===this.token}pause(e=this.token){e===this.token?this.send(c.PAUSE):this.options.pause(!0)}resume(e=this.token){e===this.token?this.send(c.RESUME):this.options.resume(!0)}message(e){try{this.channel.postMessage({action:c.MESSAGE,token:this.token,data:e})}catch{}}send(e){try{this.channel.postMessage({action:e,token:this.token})}catch{}}close(){this.options.leaderElection&&this.elector.close(),this.send(c.DEREGISTER),this.channel.close()}};var mt=k?document:null,Ee=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange","focus"];function dt(t,e){let i;function o(...l){i&&clearTimeout(i),i=setTimeout(()=>{t(...l),i=null},e)}return o.cancel=function(){clearTimeout(i)},o}function be(t,e){let i=0;return function(...o){let l=new Date().getTime();if(!(l-i<e))return i=l,t(...o)}}var T=()=>Date.now();var Q=2147483647;function z({timeout:t=1e3*60*20,promptTimeout:e=0,promptBeforeIdle:i=0,element:o=mt,events:l=Ee,timers:m=void 0,immediateEvents:b=[],onPresenceChange:S=()=>{},onPrompt:F=()=>{},onIdle:p=()=>{},onActive:u=()=>{},onAction:f=()=>{},onMessage:d=()=>{},debounce:h=0,throttle:s=0,eventsThrottle:U=200,startOnMount:g=!0,startManually:D=!1,stopOnIdle:ae=!1,crossTab:q=!1,name:Ce="idle-timer",syncTimers:ee=0,leaderElection:Re=!1}={}){let De=(0,n.useRef)(T()),ce=(0,n.useRef)(T()),y=(0,n.useRef)(null),M=(0,n.useRef)(null),N=(0,n.useRef)(0),te=(0,n.useRef)(0),O=(0,n.useRef)(0),P=(0,n.useRef)(0),v=(0,n.useRef)(!1),E=(0,n.useRef)(!1),C=(0,n.useRef)(!1),_=(0,n.useRef)(!0),re=(0,n.useRef)(!1),R=(0,n.useRef)(null),a=(0,n.useRef)(null),x=(0,n.useRef)(t),W=(0,n.useRef)(0);(0,n.useEffect)(()=>{if(e&&console.warn("\u26A0\uFE0F IdleTimer -- The `promptTimeout` property has been deprecated in favor of `promptBeforeIdle`. It will be removed in the next major release."),i&&e)throw new Error("\u274C Both promptTimeout and promptBeforeIdle can not be set. The promptTimeout property will be deprecated in a future version.");if(t>=Q)throw new Error(`\u274C The value for the timeout property must fit in a 32 bit signed integer, ${Q}.`);if(e>=Q)throw new Error(`\u274C The value for the promptTimeout property must fit in a 32 bit signed integer, ${Q}.`);if(i>=Q)throw new Error(`\u274C The value for the promptBeforeIdle property must fit in a 32 bit signed integer, ${Q}.`);if(i?(x.current=t-i,W.current=i):(x.current=t,W.current=e),!_.current){if(D)return;v.current&&(j.current(),a.current&&a.current.active()),$()}},[t,e,i,D]);let Ne=(0,n.useRef)(ae);(0,n.useEffect)(()=>{Ne.current=ae},[ae]);let _e=(0,n.useRef)(b),ge=(0,n.useRef)(o),ye=(0,n.useRef)([...new Set([...l,...b]).values()]),ne=(0,n.useRef)(S);(0,n.useEffect)(()=>{ne.current=S},[S]);let le=(0,n.useRef)(F);(0,n.useEffect)(()=>{le.current=F},[F]);let ue=(0,n.useRef)(p);(0,n.useEffect)(()=>{ue.current=p},[p]);let j=(0,n.useRef)(u);(0,n.useEffect)(()=>{j.current=u},[u]);let me=(0,n.useRef)(f);(0,n.useEffect)(()=>{me.current=f},[f]);let Y=(0,n.useRef)(d);(0,n.useEffect)(()=>{Y.current=d},[d]);let B=(0,n.useMemo)(()=>{let r=w=>me.current(w);return h>0?dt(r,h):s>0?be(r,s):r},[s,h]),He=(0,n.useRef)();(0,n.useEffect)(()=>{q&&ee&&(He.current=be(()=>{a.current.active()},ee))},[q,ee]);let A=()=>{R.current!==null&&(I.clearTimeout(R.current),R.current=null)},V=(r,w=!0)=>{A(),R.current=I.setTimeout(Le,r||x.current),w&&(M.current=T())},Fe=r=>{!E.current&&!v.current&&(le.current(r),ne.current({type:"active",prompted:!0})),P.current=0,O.current=T(),E.current=!0,V(W.current,!1)},Ue=()=>{A(),v.current||(ue.current(),ne.current({type:"idle"})),v.current=!0,y.current=T(),Ne.current?G():E.current&&(O.current=0,E.current=!1)},we=r=>{A(),(v.current||E.current)&&(j.current(r),ne.current({type:"active",prompted:!1})),E.current=!1,O.current=0,v.current=!1,N.current+=T()-y.current,te.current+=T()-y.current,H(),V()},Le=r=>{if(!v.current){B.cancel&&B.cancel();let pe=T()-M.current;if(!(x.current+W.current<pe)&&W.current>0&&!E.current){a.current?a.current.prompt():Fe(r);return}a.current?a.current.idle():Ue();return}a.current?a.current.active():we(r)},Pe=r=>{if(!g&&!M.current&&(M.current=T(),j.current()),B(r),E.current)return;if(A(),!v.current&&_e.current.includes(r.type)){Le(r);return}let w=T()-M.current;if(v.current&&!ae||!v.current&&w>=x.current){Le(r);return}C.current=!1,P.current=0,O.current=0,V(),q&&ee&&He.current()},de=(0,n.useRef)(Pe);(0,n.useEffect)(()=>{let r=re.current;r&&G(),U>0?de.current=be(Pe,U):de.current=Pe,r&&H()},[U,s,h,me,q,ee]);let H=()=>{!k||re.current||(ye.current.forEach(r=>{ge.current.addEventListener(r,de.current,{capture:!0,passive:!0})}),re.current=!0)},G=(r=!1)=>{!k||(re.current||r)&&(ye.current.forEach(w=>{ge.current.removeEventListener(w,de.current,{capture:!0})}),re.current=!1)},$=(0,n.useCallback)(r=>{A(),H(),v.current=!1,E.current=!1,C.current=!1,P.current=0,O.current=0,a.current&&!r&&a.current.start(),V()},[R,v,x,a]),ke=(0,n.useCallback)(r=>{A(),H(),ce.current=T(),N.current+=T()-y.current,te.current+=T()-y.current,N.current=0,v.current=!1,E.current=!1,C.current=!1,P.current=0,O.current=0,a.current&&!r&&a.current.reset(),D||V()},[R,v,x,D,a]),We=(0,n.useCallback)(r=>{A(),H(),(v.current||E.current)&&we(),v.current=!1,E.current=!1,C.current=!1,P.current=0,O.current=0,ce.current=T(),a.current&&!r&&a.current.activate(),V()},[R,v,E,x,a]),Me=(0,n.useCallback)((r=!1)=>C.current?!1:(P.current=Be(),C.current=!0,G(),A(),a.current&&!r&&a.current.pause(),!0),[R,a]),xe=(0,n.useCallback)((r=!1)=>C.current?(C.current=!1,E.current||H(),v.current||V(P.current),O.current&&(O.current=T()),a.current&&!r&&a.current.resume(),!0):!1,[R,x,P,a]),vt=(0,n.useCallback)((r,w)=>{a.current?(w&&Y.current(r),a.current.message(r)):w&&Y.current(r)},[d]),Tt=(0,n.useCallback)(()=>v.current,[v]),It=(0,n.useCallback)(()=>E.current,[E]),Et=(0,n.useCallback)(()=>a.current?a.current.isLeader:null,[a]),bt=(0,n.useCallback)(()=>a.current?a.current.isLastActive:null,[a]),gt=(0,n.useCallback)(()=>a.current?a.current.token:null,[a]),Be=(0,n.useCallback)(()=>{if(C.current)return P.current;let r=P.current?P.current:W.current+x.current,w=M.current?T()-M.current:0,pe=Math.floor(r-w);return pe<0?0:Math.abs(pe)},[x,W,E,P,M]),Ve=(0,n.useCallback)(()=>Math.round(T()-ce.current),[ce]),Ge=(0,n.useCallback)(()=>Math.round(T()-De.current),[De]),yt=(0,n.useCallback)(()=>y.current?new Date(y.current):null,[y]),wt=(0,n.useCallback)(()=>M.current?new Date(M.current):null,[M]),qe=(0,n.useCallback)(()=>v.current?Math.round(T()-y.current+N.current):Math.round(N.current),[y,N]),je=(0,n.useCallback)(()=>v.current?Math.round(T()-y.current+te.current):Math.round(te.current),[y,te]),Lt=(0,n.useCallback)(()=>{let r=Math.round(Ve()-qe());return r>=0?r:0},[y,N]),Pt=(0,n.useCallback)(()=>{let r=Math.round(Ge()-je());return r>=0?r:0},[y,N]);return(0,n.useEffect)(()=>{if(h>0&&s>0)throw new Error("\u274C onAction can either be throttled or debounced, not both.");m&&at(m);let r=()=>{a.current&&a.current.close(),B.cancel&&B.cancel(),A(),G(!0)};return k&&window.addEventListener("beforeunload",r),()=>{k&&window.removeEventListener("beforeunload",r),a.current&&a.current.close(),B.cancel&&B.cancel(),A(),G(!0)}},[]),(0,n.useEffect)(()=>{a.current&&a.current.close(),q?a.current=new Oe({channelName:Ce,leaderElection:Re,onPrompt:()=>{Fe()},onIdle:()=>{Ue()},onActive:()=>{we()},onMessage:(...r)=>{Y.current(...r)},start:$,reset:ke,activate:We,pause:Me,resume:xe}):a.current=null},[q,Ce,Re,le,ue,j,Y,$,ke,Me,xe]),(0,n.useEffect)(()=>{_.current||(A(),G(!0)),!D&&(g?$():H())},[D,g,_]),(0,n.useEffect)(()=>{if(!_.current){let r=[...new Set([...l,...b]).values()];if(G(),ye.current=r,ge.current=o,_e.current=b,D)return;g?$():H()}},[o,JSON.stringify(l),JSON.stringify(b),_,D,g]),(0,n.useEffect)(()=>{_.current&&(_.current=!1)},[_]),{message:vt,start:$,reset:ke,activate:We,pause:Me,resume:xe,isIdle:Tt,isPrompted:It,isLeader:Et,isLastActiveTab:bt,getTabId:gt,getRemainingTime:Be,getElapsedTime:Ve,getTotalElapsedTime:Ge,getLastIdleTime:yt,getLastActiveTime:wt,getIdleTime:qe,getTotalIdleTime:je,getActiveTime:Lt,getTotalActiveTime:Pt,setOnPresenceChange:r=>{S=r,ne.current=r},setOnPrompt:r=>{F=r,le.current=r},setOnIdle:r=>{p=r,ue.current=r},setOnActive:r=>{u=r,j.current=r},setOnAction:r=>{f=r,me.current=r},setOnMessage:r=>{d=r,Y.current=r}}}var Z=he(require("react"));var se=(0,Z.createContext)(null);function pt(t){let e=z(t);return Z.default.createElement(se.Provider,{value:e},t.children)}var ft=se.Consumer;function ht(){return(0,Z.useContext)(se)}
